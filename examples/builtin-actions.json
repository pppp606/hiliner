{
  "$schema": "../src/schemas/actionConfig.schema.json",
  "version": "1.0.0",
  "metadata": {
    "name": "Essential Built-in Actions",
    "description": "Essential built-in action examples using the 8 core environment variables: $SELECTED_TEXT, $FILE_PATH, $LINE_START, $LINE_END, $LANGUAGE, $SELECTION_COUNT, $TOTAL_LINES, $CURRENT_LINE",
    "author": "Hiliner Team",
    "created": "2024-08-26T00:00:00Z",
    "modified": "2024-08-26T00:00:00Z"
  },
  "actions": [
    {
      "id": "copy-selection",
      "name": "Copy Selection to Clipboard",
      "description": "Copy selected lines to system clipboard using the $SELECTED_TEXT environment variable",
      "key": "y",
      "script": {
        "type": "external",
        "command": "sh",
        "args": ["-c", "echo \"$SELECTED_TEXT\" | pbcopy || echo \"$SELECTED_TEXT\" | xclip -selection clipboard || echo \"Clipboard not available\""],
        "environment": {
          "SELECTED_TEXT": "$SELECTED_TEXT"
        }
      },
      "when": {
        "hasSelection": true
      },
      "category": "editing"
    },
    {
      "id": "save-selection",
      "name": "Save Selection to File",
      "description": "Save selected lines to a new file using $SELECTED_TEXT, $FILE_PATH, $LINE_START, and $LINE_END variables",
      "key": "w",
      "script": {
        "type": "external",
        "command": "sh",
        "args": ["-c", "echo \"$SELECTED_TEXT\" > \"$(basename $FILE_PATH .${FILE_PATH##*.})_lines_${LINE_START}-${LINE_END}.txt\" && echo \"Saved $SELECTION_COUNT lines to $(basename $FILE_PATH .${FILE_PATH##*.})_lines_${LINE_START}-${LINE_END}.txt\""],
        "environment": {
          "SELECTED_TEXT": "$SELECTED_TEXT",
          "FILE_PATH": "$FILE_PATH",
          "LINE_START": "$LINE_START",
          "LINE_END": "$LINE_END",
          "SELECTION_COUNT": "$SELECTION_COUNT"
        }
      },
      "when": {
        "hasSelection": true
      },
      "category": "file"
    },
    {
      "id": "open-editor",
      "name": "Open in Editor",
      "description": "Open current file in preferred editor at current line using $FILE_PATH and $CURRENT_LINE variables",
      "key": "e",
      "script": {
        "type": "external",
        "command": "sh",
        "args": ["-c", "code -g $FILE_PATH:$CURRENT_LINE || vim +$CURRENT_LINE $FILE_PATH || nano +$CURRENT_LINE $FILE_PATH || echo 'No editor found'"],
        "environment": {
          "FILE_PATH": "$FILE_PATH",
          "CURRENT_LINE": "$CURRENT_LINE"
        },
        "timeout": 5000
      },
      "category": "file"
    },
    {
      "id": "goto-line",
      "name": "Go to Line Number",
      "description": "Jump to a specific line number (uses $CURRENT_LINE and $TOTAL_LINES for context)",
      "key": ":",
      "script": {
        "type": "builtin",
        "builtin": "goToLine"
      },
      "category": "navigation"
    },
    {
      "id": "show-file-info",
      "name": "Show File Information",
      "description": "Display comprehensive file information using all 8 environment variables: $FILE_PATH, $LANGUAGE, $TOTAL_LINES, $CURRENT_LINE, $SELECTION_COUNT, $LINE_START, $LINE_END, $SELECTED_TEXT",
      "key": "i",
      "script": {
        "type": "external",
        "command": "sh",
        "args": ["-c", "echo \"=== File Information ===\"; echo \"File: $FILE_PATH\"; echo \"Language: $LANGUAGE\"; echo \"Total Lines: $TOTAL_LINES\"; echo \"Current Line: $CURRENT_LINE\"; echo \"Selection: $SELECTION_COUNT lines ($LINE_START-$LINE_END)\"; echo \"Selected Text Preview: $(echo '$SELECTED_TEXT' | head -c 100)$([ ${#SELECTED_TEXT} -gt 100 ] && echo '...')\"; ls -la \"$FILE_PATH\""],
        "environment": {
          "FILE_PATH": "$FILE_PATH",
          "LANGUAGE": "$LANGUAGE", 
          "TOTAL_LINES": "$TOTAL_LINES",
          "CURRENT_LINE": "$CURRENT_LINE",
          "SELECTION_COUNT": "$SELECTION_COUNT",
          "LINE_START": "$LINE_START",
          "LINE_END": "$LINE_END",
          "SELECTED_TEXT": "$SELECTED_TEXT"
        },
        "captureOutput": true
      },
      "category": "view"
    },
    {
      "id": "search-selection",
      "name": "Search Selection in File",
      "description": "Search for selected text in current file using $SELECTED_TEXT and $FILE_PATH",
      "key": "s",
      "script": {
        "type": "external",
        "command": "grep",
        "args": ["-n", "--color=always", "$SELECTED_TEXT", "$FILE_PATH"],
        "environment": {
          "SELECTED_TEXT": "$SELECTED_TEXT",
          "FILE_PATH": "$FILE_PATH"
        },
        "captureOutput": true
      },
      "when": {
        "hasSelection": true
      },
      "category": "search"
    },
    {
      "id": "git-blame-selection",
      "name": "Git Blame Selection",
      "description": "Show git blame for selected lines using $LINE_START, $LINE_END, and $FILE_PATH",
      "key": "B",
      "script": {
        "type": "external",
        "command": "git",
        "args": ["blame", "-L", "$LINE_START,$LINE_END", "$FILE_PATH"],
        "environment": {
          "FILE_PATH": "$FILE_PATH",
          "LINE_START": "$LINE_START",
          "LINE_END": "$LINE_END"
        },
        "captureOutput": true
      },
      "when": {
        "hasSelection": true
      },
      "category": "file"
    },
    {
      "id": "create-snippet",
      "name": "Create Code Snippet",
      "description": "Create a reusable code snippet from selection with metadata using all environment variables",
      "key": "S",
      "script": {
        "type": "external",
        "command": "sh",
        "args": ["-c", "mkdir -p ~/.hiliner/snippets && snippet_file=\"~/.hiliner/snippets/$(basename $FILE_PATH)_${LANGUAGE}_${LINE_START}-${LINE_END}.snippet\" && echo \"# Snippet from $FILE_PATH (lines $LINE_START-$LINE_END)\" > $snippet_file && echo \"# Language: $LANGUAGE\" >> $snippet_file && echo \"# Total lines in file: $TOTAL_LINES\" >> $snippet_file && echo \"# Created from line $CURRENT_LINE\" >> $snippet_file && echo \"# Selection: $SELECTION_COUNT lines\" >> $snippet_file && echo \"\" >> $snippet_file && echo \"$SELECTED_TEXT\" >> $snippet_file && echo \"Snippet saved to $snippet_file\""],
        "environment": {
          "FILE_PATH": "$FILE_PATH",
          "LANGUAGE": "$LANGUAGE",
          "TOTAL_LINES": "$TOTAL_LINES", 
          "CURRENT_LINE": "$CURRENT_LINE",
          "SELECTION_COUNT": "$SELECTION_COUNT",
          "LINE_START": "$LINE_START",
          "LINE_END": "$LINE_END",
          "SELECTED_TEXT": "$SELECTED_TEXT"
        }
      },
      "when": {
        "hasSelection": true
      },
      "category": "editing"
    }
  ],
  "keyBindings": {
    "ctrl+c": "copy-selection",
    "ctrl+s": "save-selection", 
    "ctrl+o": "open-editor",
    "ctrl+i": "show-file-info"
  },
  "environment": {
    "variables": {
      "EDITOR": "code",
      "PAGER": "less",
      "HILINER_SNIPPET_DIR": "~/.hiliner/snippets"
    },
    "timeout": 10000,
    "shell": "bash"
  }
}