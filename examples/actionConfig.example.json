{
  "$schema": "../src/schemas/actionConfig.schema.json",
  "version": "1.0.0",
  "metadata": {
    "name": "Example Action Configuration",
    "description": "Demonstrates various action types and configurations for Hiliner",
    "author": "Hiliner Team",
    "created": "2024-08-26T00:00:00Z"
  },
  "actions": [
    {
      "id": "copy-line",
      "name": "Copy Current Line",
      "description": "Copy the current line to system clipboard",
      "key": "c",
      "script": "echo '{{currentLine}}: {{selectedText}}' | pbcopy",
      "category": "editing"
    },
    {
      "id": "open-vscode",
      "name": "Open in VS Code",
      "description": "Open current file in VS Code at the current line",
      "key": "e",
      "script": {
        "type": "external",
        "command": "code",
        "args": ["{{currentFile}}:{{currentLine}}"],
        "timeout": 5000,
        "variables": {
          "currentFile": true,
          "currentLine": true
        }
      },
      "category": "file"
    },
    {
      "id": "git-log",
      "name": "Git Log for File",
      "description": "Show git log for the current file",
      "key": "l",
      "script": {
        "type": "external",
        "command": "git",
        "args": ["log", "--oneline", "-10", "{{currentFile}}"],
        "workingDirectory": "{{fileDir}}",
        "captureOutput": true
      },
      "when": {
        "fileTypes": [".js", ".ts", ".py", ".go", ".rs", ".java", ".c", ".cpp"]
      },
      "category": "file"
    },
    {
      "id": "search-selection",
      "name": "Search Selected Text",
      "description": "Search for selected text in the current directory",
      "key": "s",
      "script": {
        "type": "external",
        "command": "grep",
        "args": ["-r", "--include=*.{js,ts,py,go,rs}", "{{selectedText}}", "."],
        "workingDirectory": "{{fileDir}}"
      },
      "when": {
        "hasSelection": true
      },
      "category": "search"
    },
    {
      "id": "format-file",
      "name": "Format File",
      "description": "Format the current file using appropriate formatter",
      "key": "f",
      "script": {
        "type": "sequence",
        "sequence": [
          {
            "type": "external",
            "command": "prettier",
            "args": ["--write", "{{currentFile}}"],
            "onFailure": "echo 'Prettier not available, trying alternative formatter'"
          },
          {
            "type": "builtin",
            "builtin": "reload"
          }
        ]
      },
      "when": {
        "fileTypes": [".js", ".ts", ".json", ".html", ".css", ".md"]
      },
      "category": "editing"
    },
    {
      "id": "backup-and-delete",
      "name": "Backup and Delete File",
      "description": "Create a backup of the current file and then delete the original",
      "key": "D",
      "script": {
        "type": "sequence",
        "sequence": [
          {
            "type": "external",
            "command": "cp",
            "args": ["{{currentFile}}", "{{currentFile}}.backup"]
          },
          {
            "type": "external",
            "command": "rm",
            "args": ["{{currentFile}}"]
          }
        ]
      },
      "dangerous": true,
      "confirmPrompt": "This will backup and delete the current file. Are you sure?",
      "category": "file",
      "priority": 10
    },
    {
      "id": "toggle-line-numbers",
      "name": "Toggle Line Numbers",
      "description": "Show or hide line numbers in the display",
      "key": "n",
      "script": {
        "type": "builtin",
        "builtin": "toggleLineNumbers"
      },
      "category": "view"
    },
    {
      "id": "custom-help",
      "name": "Show Custom Actions Help",
      "description": "Display help for all custom actions",
      "key": "H",
      "alternativeKeys": ["?"],
      "script": {
        "type": "builtin",
        "builtin": "showHelp"
      },
      "category": "view"
    }
  ],
  "keyBindings": {
    "r": "reload-file",
    "q": "quit",
    "?": "custom-help"
  },
  "environment": {
    "variables": {
      "HILINER_CONFIG": "custom",
      "EDITOR": "code",
      "PAGER": "less"
    },
    "timeout": 10000,
    "shell": "bash"
  }
}